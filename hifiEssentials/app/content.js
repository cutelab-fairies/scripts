var content = {
	avatars: [
		{
			name: "<img src='avatars/subcom.svg' style='height: 40px'/>",
			avatars: [
				{
					name: "Daven Atlanta",
					thumbnail: "avatars/subcom/daven-atlanta.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/LittleMouse/HF%20Daven%20Atlanta%20Atlas/HF%20Daven%20Atlanta%20Atlas.fst"
				},
				{
					name: "Witch",
					thumbnail: "avatars/subcom/witch.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/LittleMouse/HF%20-%20Witch/HF%20-%20Witch.fst"
				},
				{
					name: "Gangstar Sleeveless",
					thumbnail: "avatars/subcom/gangstar-sleeveless.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/LittleMouse/HF%20-%20Gangstar%20Sleeveless%20Finger%20Fix/HF%20-%20Gangstar%20Sleeveless%20Finger%20Fix.fst"
				},
				{
					name: "Wolfy",
					thumbnail: "avatars/subcom/wolfy.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/Diviy/Working%20exports%20only/wolfy2/wolfy2.fst"
				},
				{
					name: "Cute Converse",
					thumbnail: "avatars/subcom/cute-converse.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/Diviy/Working%20exports%20only/cute%20convers4/cute%20convers4.fst"
				},
				{
					name: "Wolf Trap Tanooki",
					thumbnail: "avatars/subcom/wolf-trap-tanooki.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/LittleMouse/HF%20Wolf%20Trap%20-%20Tanooki%20atlas%20-%20weight%20painting%20fix/HF%20Wolf%20Trap%20-%20Tanooki%20atlas%20-%20weight%20painting%20fix.fst"
				},
				{
					name: "Emo Wolf Boy",
					thumbnail: "avatars/subcom/emo-wolf-boy.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/LittleMouse/HF%20Emo%20Wolf%20Boy%20Finger%20Fixed/HF%20Emo%20Wolf%20Boy%20Finger%20Fixed.fst"
				},
				{
					name: "Goth Ooka",
					thumbnail: "avatars/subcom/goth-ooka.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/Diviy/Working%20exports%20only/goth%20ooka6/goth%20ooka6.fst"
				},
				{
					name: "Teen Neko",
					thumbnail: "avatars/subcom/teen-neko.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/Diviy/Working%20exports%20only/teen%20neko5/teen%20neko5.fst"
				},
				{
					name: "Headphone Wolfy",
					thumbnail: "avatars/subcom/headphone-wolfy.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/Diviy/Working%20exports%20only/headphone%20wolfy%207/headphone%20wolfy%207.fst"
				},
				{
					name: "Azuma Lim",
					thumbnail: "avatars/subcom/azuma-lim.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/LittleMouse/Azuma%20Lim%20edit%20by%20Subcom%20Finger%20Edit/Azuma%20Lim%20edit%20by%20Subcom%20Finger%20Edit.fst"
				},
				{
					name: "Timbs Hoppou",
					thumbnail: "avatars/subcom/timbs-hoppou.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/Diviy/Working%20exports%20only/Timbs%20hoppou5/Timbs%20hoppou4.fst"
				},
				{
					name: "Sweater Dress",
					thumbnail: "avatars/subcom/sweater-dress.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/Diviy/Working%20exports%20only/sweater%20dress10/sweater%20dress10.fst"
				},
				{
					name: "Lilith",
					thumbnail: "avatars/subcom/lilith.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/LittleMouse/HF%20-%20Lilith%202%20fixed%20emit%20transparency%20NO%20PSD/HF%20-%20Lilith%202%20fixed%20emit%20transparency%20NO%20PSD.fst"
				},
				{
					name: "Luna Fox",
					thumbnail: "avatars/subcom/luna-fox.jpg",
					url: "https://hifi-makers.s3.amazonaws.com/subcom/LittleMouse/HF%20Luna%20Fox%20EM%20FINAL/HF%20Luna%20Fox%20EM%20FINAL.fst"
				},
			]
		},
		{
			name: "<img src='avatars/mgf.png' style='height: 80px'/>",
			avatars: [
				{
					name: "Akari Akaza",
					thumbnail: "avatars/mgf/yraitm001.jpg",
					url: "https://hotmilk.space/mgf/yraitm001.fst",
				},
				{
					name: "Chinatsu Yoshikawa",
					thumbnail: "avatars/mgf/yrcitm001.jpg",
					url: "https://hotmilk.space/mgf/yrcitm001.fst",
				},
				{
					name: "Kyouko Toshinou",
					thumbnail: "avatars/mgf/yrkitm001.jpg",
					url: "https://hotmilk.space/mgf/yrkitm001.fst",
				},
				{
					name: "Yui Funami",
					thumbnail: "avatars/mgf/yryitm001.jpg",
					url: "https://hotmilk.space/mgf/yryitm001.fst",
				},
				{
					name: "Akari Akaza",
					thumbnail: "avatars/mgf/yraitm002.jpg",
					url: "https://hotmilk.space/mgf/yraitm002.fst",
				},
				{
					name: "Chinatsu Yoshikawa",
					thumbnail: "avatars/mgf/yrcitm002.jpg",
					url: "https://hotmilk.space/mgf/yrcitm002.fst",
				},
				{
					name: "Kyouko Toshinou",
					thumbnail: "avatars/mgf/yrkitm002.jpg",
					url: "https://hotmilk.space/mgf/yrkitm002.fst",
				},
				{
					name: "Yui Funami",
					thumbnail: "avatars/mgf/yryitm002.jpg",
					url: "https://hotmilk.space/mgf/yryitm002.fst",
				},
			],
		},
		{
			name: "<img src='avatars/memes.svg' style='height: 40px'/>",
			fontFamily: "'Comic Sans MS', 'Roboto', sans-serif",
			avatars: [
				{
					name: "big chungus",
					thumbnail: "avatars/memes/chungus.jpg",
					url: "https://hotmilk.space/memes/chungus.fst"
				},
				{
					name: "donald trump",
					thumbnail: "avatars/memes/trump.jpg",
					url: "https://hotmilk.space/memes/trump.fst"
				},
				{
					name: "ugandan knuckles",
					thumbnail: "avatars/memes/ugandan-knuckles.jpg",
					url: "https://hotmilk.space/memes/ugandan-knuckles.fst"
				},
				{
					name: "muscle pooh",
					thumbnail: "avatars/memes/muscle-pooh.png",
					url: "https://hotmilk.space/memes/muscle-pooh.fst"
				}

			],
		},
		{
			name: "<img src='avatars/bigtin-avatars.svg' style='height: 60px'/>",
			fontFamily: "'Comic Sans MS', 'Roboto', sans-serif",
			avatars: [
				{
					name: "ameritin",
					thumbnail: "avatars/bigtin/ameritin.jpg",
					url: "https://hotmilk.space/bigtin/ameritin.fst"
				},
				{
					name: "tin bot 1000",
					thumbnail: "avatars/bigtin/tinbot1000.jpg",
					url: "https://hotmilk.space/bigtin/tinbot1000.fst",
				}
			],
		},
	],
	worlds: [
		{
			name: "Maki",
			logo: "worlds/maki-logo.svg",
			logoOffset: 0,
			background: "worlds/maki-bg.jpg",
			description: "A cute domain for cute people who want to make cute things!",
			link: "hifi://maki",
		},
		{
			name: "Portalarium",
			logo: "worlds/portalarium-logo.svg",
			logoOffset: 20,
			background: "worlds/portalarium-bg.jpg",
			description: "A calm, cozy and peaceful camp ground with teleporters.",
			link: "hifi://portalarium",
		},
		{
			name: "Maker",
			logo: "worlds/maker-logo.svg",
			logoOffset: 0,
			background: "worlds/maker-bg.jpg",
			description: "Open sandbox & official gathering spot for the Maker community.",
			link: "hifi://maker"
		},
		{
			name: "Solace",
			logo: "worlds/solace-logo.svg",
			logoOffset: 0,
			background: "worlds/solace-bg.jpg",
			description: "Worship the light in the black and white. Community managed.",
			link: "hifi://solace"
		},
		{
			name: "Astral Gallery",
			logo: "worlds/astral-gallery-logo.svg",
			logoOffset: 0,
			background: "worlds/astral-gallery-bg.gif",
			description: "Enjoy an immersive psychedelic experience crafted by The Architect.",
			link: "hifi://astralgallery"
		},
		{
			name: "Duckpond",
			logo: "worlds/duckpond-logo.svg",
			loopOffset:0,
			background:"worlds/duckpond-bg.gif",
			description: "1029Chris' otherworldly duck pond!",
			link: "hifi://duckpond"
		},
		{
			name: "Tin-land",
			logo: "worlds/tin-land-logo.svg",
			loopOffset:0,
			background:"worlds/tin-land-bg.gif",
			description: "Home of Big Tin and the only Burbur Kang in High Fidelity!",
			link: "hifi://tin-land"
		}

	],
	scripts: [
		{
			name: "general",
			scripts: [
				{
					name: "<img src='scripts/makisNametags.svg' style='height: 30px'/>",
					link: "https://hifi.maki.cat/client-scripts/makisNametags/makisNametags.js"
				},
				{
					name: "<img src='scripts/portalDropper.svg' style='height: 30px'/>",
					author: "FluffyJenkins",
					itemName: "app-portalDropper.js",
					itemId: "74fdb4d7-1f55-487c-b2c7-e63044059599",
				},
			]
		},
		{
			name: "for virtual reality",
			scripts: [
				{
					name: "<img src='scripts/fingerPaint.svg' style='height: 40px'/>",
					author: "Mimicry",
					itemName: "fingerPaint.js",
					itemId: "d3985860-e94a-42d8-aa1f-c498b2cebabd",
				},
				{
					name: "<img src='scripts/spectatorCamera.svg' style='height: 40px'/>",
					author: "zfox",
					itemName: "spectatorCamera.js",
					itemId: "1688f21e-c7dd-4fa8-ae5f-72142df91ad8",
				},
			]
		},
		{
			name: "for desktop mode",
			scripts: [
				{
					name: "<img src='scripts/chat.svg' style='height: 20px'/>",
					author: "George",
					link: "https://transmissiongate.com/hifi/chat/chat.js"
				},
				{
					name: "<img src='scripts/sign.svg' style='height: 30px'/>",
					author: "Menithal",
					itemName: "sign.js",
					itemId: "8cf6f9fe-55f9-40ae-84fd-e8229df4ab67",
				},
				{
					name: "<img src='scripts/tts.svg' style='height: 30px'/>",
					author: "zfox",
					itemName: "TTS.js",
					itemId: "568b183d-db87-4618-9e40-aba840ec3b26",
				},
				{
					name: "<img src='scripts/inspect.svg' style='height: 30px'/>",
					author: "Cl&eacute;ment Brisset, CtrlAltStudio, Wolfgang, FluffyJenkins",
					link: "https://maki.cat/hifi/scripts/inspect.js"
				},
			]
		},
	]
}

// avatars
content.avatars.forEach(category=>{
	let div = document.createElement("div");

	category.avatars.forEach(avatar=>{
		let avatarEl = document.createElement("a");
		avatarEl.href = "javascript:";
		avatarEl.addEventListener("click", e=>{
			changeAvatar(avatar.name, avatar.url);
		});

		let avatarSelector = document.createElement("div");
		avatarSelector.id = "avatar-selector";

		let avatarThumbnail = document.createElement("div");
		avatarThumbnail.id = "avatar-thumbnail";
		avatarThumbnail.style.backgroundImage = "url("+avatar.thumbnail+")";

		let avatarName = document.createElement("p");
		avatarName.id = "avatar-name";
		avatarName.innerHTML = avatar.name;
		if (category.fontFamily)
			avatarName.style.fontFamily = category.fontFamily;

		avatarSelector.appendChild(avatarThumbnail);
		avatarSelector.appendChild(avatarName);
		avatarEl.appendChild(avatarSelector);
		div.appendChild(avatarEl);
	});

	document.getElementById("avatars").appendChild(new Collapse(category.name, div));
}) 

let p = document.createElement("p");
p.style.margin = "10px";
p.style.opacity = "0.6";
p.innerHTML = "New avatars and worlds are being added all the time so check back later to find more!"
document.getElementById("avatars").appendChild(p);

// worlds
function shuffle(array) {
	var currentIndex = array.length, temporaryValue, randomIndex;
	while (0 !== currentIndex) {
		randomIndex = Math.floor(Math.random() * currentIndex);
		currentIndex -= 1;
		temporaryValue = array[currentIndex];
		array[currentIndex] = array[randomIndex];
		array[randomIndex] = temporaryValue;
	}
	return array;
}

new WorldSelector(document.getElementById("worlds"), shuffle(content.worlds));

// scripts

content.scripts.forEach(category=>{
	let name = document.createElement("h1");
	name.innerHTML = category.name;
	name.style.margin = "10px";
	document.getElementById("scripts").appendChild(name);

	let table = document.createElement("table"); 
	table.style.marginLeft = "25px";
	table.cellSpacing = "10px";

	category.scripts.forEach((script, i)=>{

		let safeFilename = script.itemName;
		if (script.link) safeFilename = script.link.split("/").pop();
		safeFilename = safeFilename.split(".");
		safeFilename.pop();
		safeFilename = safeFilename.join(".");
		// filename without .js

		let tr = document.createElement("tr");
		tr.className = "pointer";
		tr.id = "scripts-"+safeFilename;
		tr.addEventListener("click", ()=>{
			emitEvent("toggleScript", {
				filename: safeFilename+".js",
				itemId: script.itemId,
				link: script.link,
			});
		});

		let tdCheckbox = document.createElement("td");
		tdCheckbox.style.verticalAlign = "middle";

		let checkbox = document.createElement("div")
		checkbox.className = "checkbox"+((script.itemId)?" checkbox-marketplace":"");
		tdCheckbox.appendChild(checkbox);

		let tdName = document.createElement("td");
		tdName.style.verticalAlign = "middle";
		tdName.style.paddingLeft = "15px";
		
		tdName.innerHTML = script.name;
		if (script.author)
			tdName.innerHTML += "<p style='padding-left: 12px; opacity: 0.7;'>by "+script.author+"</p>";

		tr.appendChild(tdCheckbox);
		tr.appendChild(tdName);
		table.appendChild(tr);

		//if (i!=category.script.length-1)
			//table.appendChild(document.createElement("tr"));
	});

	document.getElementById("scripts").appendChild(table);
});
