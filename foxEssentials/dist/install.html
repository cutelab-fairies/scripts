<!DOCTYPE html>
<html>
	<head>
		<title>foxEssentials</title>
		<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
		<style type="text/css">
			*, *::before, *::after {
				margin: 0; padding: 0;
				transition: 200ms all cubic-bezier(0.4, 0.0, 0.2, 1);
			}

			@font-face {
				font-family: "Dudu Caligraphy";
				src: url(dudu_calligraphy.ttf);
			}

			body {
				width: 100vw;
				height: 100vh;
				overflow: hidden;
				font-family: "Roboto", sans-serif;
				font-size: 24px;
				user-select: none;
				color: #1d1f21;
			}

			h1, h2 {
				font-weight: 400;
			}

			#logo {
				position: fixed; margin: auto;
				top: 0; left: 0; right: 0; bottom: calc(60vh + 15px);

				image-rendering: pixelated;
				background:
					linear-gradient(rgba(29,31,33,0.5), rgba(29,31,33,0.5)),
					url(../app/assets/sakura.gif);
				background-size: cover;
				background-position: bottom;
				color: #fff;
				text-align: center;
			}

			#logo img {
				display: block;
				margin: 0 auto;
				width: 400px
			}

			@keyframes rainbow {
				0% { background-position: 0 0; }
				100% { background-position: 200% 0; }
			}

			#logo-rainbow { 
				position: fixed; margin: auto;
				left: 0; right: 0; bottom: 60vh;
				height: 15px;
				background-image: url(../app/assets/rainbow.png);
				background-size: 200% 100%;
				animation-name: rainbow;
				animation-timing-function: linear;
				animation-duration: 4s;
				animation-iteration-count: infinite;
			}

			@keyframes sway {
				0% { transform: rotate(-2.5deg); }
				50% { transform: rotate(2.5deg); }
				100% { transform: rotate(-2.5deg); }
			}

			#logo .middle>div {
				animation-name: sway;
				animation-duration: 4s;
				animation-iteration-count: infinite;
			}

			#content {
				position: fixed; margin: auto;
				top: 40vh; left: 0; right: 0; bottom: 30vh;
				/*padding: 55px 40px;*/
				/*text-align: center;*/
			}

			#content table {
				margin: 0 auto;
			}

			#footer {
				position: fixed; margin: auto;
				top: 70vh; left: 0; right: 0; bottom: 0;
				background: #f44336;
			}

			.icon {
				display: inline-block;
				height: 32px;
				width: 32px;
				margin-bottom: -8px;
			}

			.button {
				text-align: center;
				width: 100%;
				height: 50%;
				padding: 20px 20px;
				color: #fff;
				table-layout: fixed;
				border: solid 10px;
				cursor: pointer;
			}

			.button svg {
				transition: none;
				width: 48px; height: 48px;
				fill: #fff;
			}

			.yes { background: #8bc34a; border-color: #8bc34a; }
			.yes:hover { background: #fff;}
			.yes:hover td { color: #8bc34a;}
			.yes:hover svg { fill: #8bc34a; }

			.no { background: #f44336; border-color: #f44336; }
			.no:hover { background: #fff;}
			.no:hover td { color: #f44336;}
			.no:hover svg { fill: #f44336; }

			#thank-you {
				position: fixed; margin: auto;
				top: 0; left: 0; right: 0; bottom: 0;
				background: #1d1f21;
				color: #fff;
				margin-top: 100vh;
			}

			.middle {
				display: table;
				text-align: center;
				width: 100%;
				height: 100%;
			}

			.middle>div {
				display: table-cell;
				vertical-align: middle;
			}

			#thank-you   { transition: 300ms all cubic-bezier(0.4, 0.0, 1, 1) !important; }
			#thank-you * { transition: 600ms all cubic-bezier(0.0, 0.0, 0.2, 1) !important; }

			@keyframes heartbeat {
				0% { transform: scale(0.9); }
				50% { transform: scale(1.0); }
				100% { transform: scale(0.9); }
			}

			#thank-you svg {
				animation-name: heartbeat;
				animation-duration: 500ms;
				animation-iteration-count: infinite;
			}
		</style>
	</head>
	<body>
		<div id="logo">
			<div class="middle"><div>
				<img src="../app/assets/logo-white.svg"/>
				<p style="margin-top: 4px;">a lovely product by the cutelab faries</p>
			</div></div>
		</div>
		<div id="logo-rainbow"></div>
		<div id="content">
			<div class="middle"><div>
				<p>Would you like to install our app?</p><br>
				<table style="table-layout: fixed;">
					<tr>
						<td style="text-align: right;">Afterwards, you can find<br>this icon on your tablet</td>
						<td style="width: 96px;"><svg style="width: 48px; height: 48px; fill: #1d1f21;" viewBox="0 0 132 132" xmlns="http://www.w3.org/2000/svg"><path d="M111.735 131.452H19.718C8.836 131.452 0 122.617 0 111.734V19.718C0 8.835 8.835 0 19.718 0h92.017c10.883 0 19.718 8.835 19.718 19.718v92.016c0 10.883-8.835 19.718-19.718 19.718zm-1.307-48.953v-7.484c-.072-9.192-1.959-16.13-5.663-20.814-3.704-4.686-9.224-7.029-16.558-7.029-7.516 0-13.286 2.499-17.314 7.497-4.027 4.998-6.041 12.1-6.041 21.304v4.639c0 8.702 2.194 15.39 6.58 20.065 4.388 4.673 10.5 7.011 18.339 7.011 4.171 0 8.036-.8 11.596-2.401 3.56-1.599 6.274-3.693 8.144-6.283l-5.987-9.223c-3.415 3.488-7.677 5.232-12.782 5.232-3.524 0-6.131-1.002-7.821-3.006-1.69-2.005-2.643-5.174-2.858-9.508h30.365zM27.011 23.764h-5.986v82.846h5.986V66.104c1.294-4.099 3.191-7.327 5.691-9.682 2.498-2.355 5.312-3.533 8.44-3.533 3.847 0 6.671 1.241 8.468 3.722 1.798 2.481 2.715 6.328 2.751 11.542v38.457h5.933V67.506c-.252-13.556-5.465-20.334-15.641-20.334-3.417 0-6.445.926-9.089 2.778-2.643 1.851-4.827 4.341-6.553 7.469V23.764zm53.159 48.11h15.264v-1.401c-.072-3.489-.647-6.131-1.726-7.929-1.078-1.799-2.948-2.697-5.609-2.697s-4.593.953-5.798 2.859c-1.204 1.905-1.915 4.962-2.131 9.168z"/></svg></td>
					</tr>
				</table>
			</div></div>
		</div>
		<div id="footer">
			<table class="yes button">
				<tr>
					<td style="width: 96px;">
						<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>
					</td>
					<td>Yes, please!</td>
				</tr>
			</table>
			<table class="no button">
				<tr>
					<td style="width: 96px;">
						<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
					</td>
					<td>No, thank you.</td>
				</tr>
			</table>
		</div>
		<div id="thank-you">
			<div class="middle"><div>
				<svg xmlns="http://www.w3.org/2000/svg" style="fill: #f44336; width: 0; height: 0;" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
				<br><br>
				<h2 style="font-size: 0; font-family: 'Dudu Caligraphy', 'Roboto', sans-serif;">thank you!~</h2>
			</div></div>
		</div>
		<script type="text/javascript">
			var _GET = {};
			if (window.location.search.length>1) {
				window.location.search.substr(1).split("&").forEach(p=>{
					p = p.split("=");
					_GET[p[0]] = p[1];
				});
			}

			var uuid = decodeURI(_GET.uuid);

			function emitEvent(event) {
				if (window.qt) EventBridge.emitWebEvent("foxEssentialsInstall-"+uuid+"-"+event);
			}

			document.querySelector(".yes").addEventListener("click", e=>{
				emitEvent("install");
				
				let thankYou = document.getElementById("thank-you");
				thankYou.style.marginTop = "0";

				setTimeout(()=>{
					thankYou.querySelector("svg").style.width = "160px";
					thankYou.querySelector("svg").style.height = "160px";

					setTimeout(()=>{
						thankYou.querySelector("h2").style.fontSize = "48px";

						setTimeout(()=>{
							document.location = "../app/index.html";
						}, 1200);
					}, 200);
				}, 200);
			});

			document.querySelector(".no").addEventListener("click", e=>{
				window.close();
				emitEvent("close");
			});

			// clicky hover sound effects
			var sounds = {
				mouseenter: "../app/assets/sounds/ss-hover.ogg",
				mousedown: "../app/assets/sounds/ss-click.ogg",
			}

			Object.values(sounds).forEach(sound=>{ new Audio(sound); }); // preload

			var loaded = false;
			document.addEventListener("readystatechange", e=>{
				if (loaded) return;
				if (e.target.readyState != "complete") return;
				loaded = true;
				
				[".button"].forEach(query=>{
					document.querySelectorAll(query).forEach(el=>{
						Object.keys(sounds).forEach(event=>{
							el.addEventListener(event, e=>{
								let sfx = new Audio(sounds[event]);
								sfx.volume = 0.03;
								sfx.play();
							});
						});
					});
				});
			});
		</script>
	</body>
</html>